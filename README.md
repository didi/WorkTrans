# WorkTrans智能排班系统
WorkTrans智能排班系统是一款专门为广大的中小型零售业者提供智能排版系统，避免负责人因不了解业务，预估错销量等原因造成人员浪费或者人员短缺问题。

## WorkTrans核心能力
1. 在排班系统中加入深度学习算法，预测下一阶段的交易量，并通过这个交易量计算劳动工时，并进行最终的排班
2. 这套系统保证了劳动的合规性，输出的排班结果在不违反硬性规则的前提下尽量减少软性规则的违反。
3. 自动化预测，通过配置排班周期等信息自动生成排版结果
4. 可配置规则模型，包括排班合规性、员工匹配属性、组合规则、拆分规则等，使得最终的排班结果更加合理。

## 功能模块说明
### POS值预测模块
本模块主要使用了一种加权平均方法和三种时序预测模型prophet、LSTM、Seq2Seq模型对POS进行预测，从`startDate`到`endDate`每15分钟一个预测值。

### 劳动力工时预测模块
解析公司id、预测类型、开始结束时间、任务数组等参数，根据第一阶段输出（POS预测模块）预测出的POS数据和劳动力标准计算出所需的劳动力工时。

### 劳动力人数预测模块
1. 解析参数获得预测需要的各项参数，比如公司id、预测类型、班次模板、预测开始结束日期、组合规则、拆分规则等；
2. 处理各种规则，读取每天的任务列表和任务列表预测值的上下限，并根据这些规则和任务列表获得预排班矩阵；
3. 根据预排班矩阵获得劳动力人数预测值。

### 排班结果获取模块
解析排班的相关参数，如公司id、需要排班的员工，排班方案，排班类型，算法依赖等；以日为单位给需要排班的员工排班，得到最终排班结果。将排班结果保存到数据库并输出。

## 快速开始

#### 1.修改数据库配置

修改数据库配置文件db.py，路径：`basefile/config/db.py`

```python
db_config={
    "db" :{
        'mysql': {
            'driver': 'mysql',
            'host': '127.0.0.1',
            'port': 3306,
            'database': 'datatest',
            'user': 'root',
            'password': 'didi123',
            'prefix': '',
            'use_unicode': False
        }
    }
}
```

#### 2.快速启动项目

我们可以在终端使用`python run.py` 命令快速启动项目，在启动项目时可能需要手动添加`logs\errors.log`文件

### Demo

如果只是想测试最终的输出结果，可以在PBStatusService.py文件中添加参数运行，路径：`basefile/POC/service/PBStatusService.py`

### API接口
具体API接口及参数功能说明请参照`Docs\接口文档.pdf`